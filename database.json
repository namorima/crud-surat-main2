{
  "author": "Sistem Pengurusan Surat dan Bayaran",
  "title": "Database Schema - Google Sheets Architecture",
  "date": "2025-10-21T00:00:00.000Z",
  "database": "generic",
  "tables": [
    {
      "id": 0,
      "name": "SURAT",
      "comment": "Letter management records (Sheet Range: A2:M)",
      "color": "#3b82f6",
      "x": 100,
      "y": 100,
      "fields": [
        {
          "id": 0,
          "name": "id",
          "type": "TEXT",
          "primary": true,
          "unique": true,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Row index as ID"
        },
        {
          "id": 1,
          "name": "bil",
          "type": "INTEGER",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Serial number (Column A)"
        },
        {
          "id": 2,
          "name": "daripadaKepada",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "From/To party (Column B)"
        },
        {
          "id": 3,
          "name": "tarikh",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Date (Column C)"
        },
        {
          "id": 4,
          "name": "perkara",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Subject matter (Column D)"
        },
        {
          "id": 5,
          "name": "kategori",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Category (Column E)"
        },
        {
          "id": 6,
          "name": "unit",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Unit/Department (Column F) - FK to UNIT"
        },
        {
          "id": 7,
          "name": "fail",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "File reference (Column G)"
        },
        {
          "id": 8,
          "name": "tindakanPic",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Person in charge action (Column H)"
        },
        {
          "id": 9,
          "name": "status",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "BELUM PROSES",
          "check": "",
          "comment": "Letter status (Column I): BELUM PROSES | HOLD/KIV | DALAM TINDAKAN | SELESAI | BATAL"
        },
        {
          "id": 10,
          "name": "tarikhSelesai",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Completion date (Column J)"
        },
        {
          "id": 11,
          "name": "nota",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Notes (Column K)"
        },
        {
          "id": 12,
          "name": "komen",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Comments (Column L)"
        },
        {
          "id": 13,
          "name": "reference",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Reference to original letter Bil for responses (Column M)"
        }
      ],
      "indices": []
    },
    {
      "id": 1,
      "name": "REKOD_BAYARAN",
      "comment": "Payment records with financial workflow tracking (Sheet Range: A2:S)",
      "color": "#10b981",
      "x": 600,
      "y": 100,
      "fields": [
        {
          "id": 0,
          "name": "id",
          "type": "TEXT",
          "primary": true,
          "unique": true,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Auto-generated payment ID (Column A)"
        },
        {
          "id": 1,
          "name": "daripada",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "From party (Column B)"
        },
        {
          "id": 2,
          "name": "tarikhTerima",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Date received (Column C)"
        },
        {
          "id": 3,
          "name": "perkara",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Subject matter (Column D)"
        },
        {
          "id": 4,
          "name": "nilaiBayaran",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Payment amount (Column E)"
        },
        {
          "id": 5,
          "name": "bayaranKe",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Payment to (Column F)"
        },
        {
          "id": 6,
          "name": "kategori",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Category (Column G) - from KONTRAK"
        },
        {
          "id": 7,
          "name": "noKontrak",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Contract number (Column H) - FK to KONTRAK"
        },
        {
          "id": 8,
          "name": "tarikhMemoLadang",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Estate memo date (Column I)"
        },
        {
          "id": 9,
          "name": "statusLadang",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Estate status (Column J) - FK to STATUS"
        },
        {
          "id": 10,
          "name": "tarikhHantar",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Send date (Column K)"
        },
        {
          "id": 11,
          "name": "penerima",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Recipient (Column L) - FK to AUTH (PENERIMA)"
        },
        {
          "id": 12,
          "name": "statusBayaran",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Payment status (Column M) - FK to STATUS"
        },
        {
          "id": 13,
          "name": "tarikhBayar",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Payment date (Column N)"
        },
        {
          "id": 14,
          "name": "nomborBaucer",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Voucher number (Column O)"
        },
        {
          "id": 15,
          "name": "notaKaki",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Footnotes (Column P)"
        },
        {
          "id": 16,
          "name": "tarikhPpnP",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "PpnP date (Column Q)"
        },
        {
          "id": 17,
          "name": "tarikhPn",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Pn date (Column R)"
        },
        {
          "id": 18,
          "name": "namaKontraktor",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Contractor name (Column S) - Auto-populated from KONTRAK"
        }
      ],
      "indices": []
    },
    {
      "id": 2,
      "name": "AUTH",
      "comment": "User authentication and recipient configuration (Sheet Range: A2:E)",
      "color": "#f59e0b",
      "x": 100,
      "y": 500,
      "fields": [
        {
          "id": 0,
          "name": "id",
          "type": "TEXT",
          "primary": true,
          "unique": true,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "User ID / Username (Column A)"
        },
        {
          "id": 1,
          "name": "password",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "User password (Column B)"
        },
        {
          "id": 2,
          "name": "name",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "User/Recipient name (Column C)"
        },
        {
          "id": 3,
          "name": "role",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "User role (for users) or Unit (for recipients) (Column D)"
        },
        {
          "id": 4,
          "name": "type",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Record type: empty for users, 'PENERIMA' for recipients (Column E)"
        }
      ],
      "indices": []
    },
    {
      "id": 3,
      "name": "UNIT",
      "comment": "Unit and Person in Charge (PIC) mappings (Sheet Range: A2:B)",
      "color": "#8b5cf6",
      "x": 100,
      "y": 800,
      "fields": [
        {
          "id": 0,
          "name": "unit",
          "type": "TEXT",
          "primary": true,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Unit/Department name (Column A)"
        },
        {
          "id": 1,
          "name": "pic",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Person in Charge name (Column B)"
        }
      ],
      "indices": []
    },
    {
      "id": 4,
      "name": "KONTRAK",
      "comment": "Contract and contractor master data (Sheet Range: A2:D)",
      "color": "#ec4899",
      "x": 1100,
      "y": 100,
      "fields": [
        {
          "id": 0,
          "name": "kawasan",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Area/Region (Column A) - includes 'LADANG NEGERI' for all contracts"
        },
        {
          "id": 1,
          "name": "noKontrak",
          "type": "TEXT",
          "primary": true,
          "unique": true,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Contract number (Column B)"
        },
        {
          "id": 2,
          "name": "kategori",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Category (Column C)"
        },
        {
          "id": 3,
          "name": "namaKontraktor",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Contractor name (Column D)"
        }
      ],
      "indices": []
    },
    {
      "id": 5,
      "name": "STATUS",
      "comment": "Status configurations for estate and payment statuses (Sheet Range: A2:C)",
      "color": "#06b6d4",
      "x": 1100,
      "y": 500,
      "fields": [
        {
          "id": 0,
          "name": "status",
          "type": "TEXT",
          "primary": true,
          "unique": true,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Status label (Column A)"
        },
        {
          "id": 1,
          "name": "colorHex",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "#6b7280",
          "check": "",
          "comment": "Color in hexadecimal format (Column B)"
        },
        {
          "id": 2,
          "name": "kategori",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Status category: STATUS LADANG | STATUS BAYARAN (Column C)"
        }
      ],
      "indices": []
    },
    {
      "id": 6,
      "name": "AUDIT_BAYARAN",
      "comment": "Audit trail for all payment operations (Sheet Range: A2:E)",
      "color": "#ef4444",
      "x": 600,
      "y": 500,
      "fields": [
        {
          "id": 0,
          "name": "timestamp",
          "type": "TEXT",
          "primary": true,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "ISO timestamp of action (Column A)"
        },
        {
          "id": 1,
          "name": "bayaranId",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Payment record ID (Column B) - FK to REKOD_BAYARAN"
        },
        {
          "id": 2,
          "name": "user",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "User who performed action (Column C) - FK to AUTH"
        },
        {
          "id": 3,
          "name": "action",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": true,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Action type: CREATE | UPDATE | DELETE | BULK_UPDATE_STATUS (Column D)"
        },
        {
          "id": 4,
          "name": "details",
          "type": "TEXT",
          "primary": false,
          "unique": false,
          "notNull": false,
          "increment": false,
          "default": "",
          "check": "",
          "comment": "Additional action details (Column E)"
        }
      ],
      "indices": []
    }
  ],
  "relationships": [
    {
      "id": 0,
      "name": "fk_surat_unit",
      "cardinality": "Many to one",
      "startTableId": 0,
      "endTableId": 3,
      "startFieldId": 6,
      "endFieldId": 0,
      "updateConstraint": "No action",
      "deleteConstraint": "No action"
    },
    {
      "id": 1,
      "name": "fk_bayaran_kontrak",
      "cardinality": "Many to one",
      "startTableId": 1,
      "endTableId": 4,
      "startFieldId": 7,
      "endFieldId": 1,
      "updateConstraint": "No action",
      "deleteConstraint": "No action"
    },
    {
      "id": 2,
      "name": "fk_bayaran_status_ladang",
      "cardinality": "Many to one",
      "startTableId": 1,
      "endTableId": 5,
      "startFieldId": 9,
      "endFieldId": 0,
      "updateConstraint": "No action",
      "deleteConstraint": "No action"
    },
    {
      "id": 3,
      "name": "fk_bayaran_status_bayaran",
      "cardinality": "Many to one",
      "startTableId": 1,
      "endTableId": 5,
      "startFieldId": 12,
      "endFieldId": 0,
      "updateConstraint": "No action",
      "deleteConstraint": "No action"
    },
    {
      "id": 4,
      "name": "fk_bayaran_penerima",
      "cardinality": "Many to one",
      "startTableId": 1,
      "endTableId": 2,
      "startFieldId": 11,
      "endFieldId": 2,
      "updateConstraint": "No action",
      "deleteConstraint": "No action"
    },
    {
      "id": 5,
      "name": "fk_audit_bayaran",
      "cardinality": "Many to one",
      "startTableId": 6,
      "endTableId": 1,
      "startFieldId": 1,
      "endFieldId": 0,
      "updateConstraint": "No action",
      "deleteConstraint": "No action"
    },
    {
      "id": 6,
      "name": "fk_audit_user",
      "cardinality": "Many to one",
      "startTableId": 6,
      "endTableId": 2,
      "startFieldId": 2,
      "endFieldId": 0,
      "updateConstraint": "No action",
      "deleteConstraint": "No action"
    }
  ],
  "notes": [],
  "subjectAreas": []
}
